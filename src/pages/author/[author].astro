---
<<<<<<< HEAD
import { getCollection, getEntry } from "astro:content";
=======
import { getCollection } from "astro:content";
>>>>>>> 3e07bf513c4846344fd4ca9e414519c7d67de380
import type { AstroSeoProps } from "@astrolib/seo";
import Author from "@components/blog/Author.astro";
import BaseLayout from "@layouts/BaseLayout.astro";

export async function getStaticPaths() {
<<<<<<< HEAD
	const authors = await getCollection("authors", ({ slug }) => !slug.startsWith('en/'));
	return authors.map((author) => ({
		params: { author: author.slug },
	}));
}

const { author: authorSlug } = Astro.params;
const author = await getEntry('authors', authorSlug);

if (!author) {
	return new Response(null, { status: 404 });
}

const seo: AstroSeoProps = {
	title: author.data.name,
	description: author.data.description,
	canonical: `https://sviluppozen.it/author/${authorSlug}/`,
};
=======
	const authors = await getCollection("authors");

	return authors
		.map((entry) => {
			const [lang, ...slug] = entry.slug.split("/");
			return { params: { lang, author: slug.join("/") || undefined }, props: entry };
		})
		.filter((entry) => entry.params.lang === "en");
}

const author = Astro.props;
>>>>>>> 3e07bf513c4846344fd4ca9e414519c7d67de380

const seo: AstroSeoProps = {
	title: author.data.name,
	description: author.data.description,
	canonical: `https://mintaka.co/author/${author.slug}/`,
};
---

<BaseLayout seo={seo}>
	<Author author={author} />
</BaseLayout>
